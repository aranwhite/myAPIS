{
  "goid": "c4e77a7656124937c74cdbf265369338",
  "guid": "6a918aae-a853-4bc7-8502-7f161b617757",
  "name": "demo",
  "resolutionPath": "/demos*",
  "checksum": "41f7d238f19a22e104ddabae6b245abdd8193158",
  "enabled": true,
  "folderPath": "/Scratch",
  "methodsAllowed": [
    "GET",
    "POST",
    "PUT",
    "DELETE"
  ],
  "tracingEnabled": false,
  "wssProcessingEnabled": false,
  "policy": {
    "xml": "<?xml version=\"1.0\" encoding=\"UTF-8\"?>\n<wsp:Policy xmlns:L7p=\"http://www.layer7tech.com/ws/policy\" xmlns:wsp=\"http://schemas.xmlsoap.org/ws/2002/12/policy\">\n    <wsp:All wsp:Usage=\"Required\">\n        <L7p:AuditAssertion/>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"JHtnYXRld2F5LmFwaX0=\"/>\n            <L7p:ContentType stringValue=\"application/json; charset=utf-8\"/>\n            <L7p:DataType variableDataType=\"message\"/>\n            <L7p:VariableToSet stringValue=\"API_DATA\"/>\n        </L7p:SetVariable>\n        <L7p:SetVariable>\n            <L7p:Base64Expression stringValue=\"JHtnYXRld2F5LmFwaX0NCg==\"/>\n            <L7p:VariableToSet stringValue=\"stringAPIDATA\"/>\n        </L7p:SetVariable>\n        <L7p:Split>\n            <L7p:InputVariable stringValue=\"request.http.uri\"/>\n            <L7p:OutputVariable stringValue=\"uriParts\"/>\n            <L7p:SplitPattern stringValue=\"/\"/>\n        </L7p:Split>\n        <wsp:OneOrMore wsp:Usage=\"Required\">\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${request.http.method}\"/>\n                    <L7p:Expression2 stringValue=\"DELETE\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"DELETE\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${uriParts[2]}\"/>\n                    <L7p:Operator operatorNull=\"null\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item dataType=\"included\">\n                            <L7p:Type variableDataType=\"int\"/>\n                        </L7p:item>\n                        <L7p:item regex=\"included\">\n                            <L7p:Pattern stringValue=\"^[1-9]\\d*$\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt1cmlQYXJ0c1syXX0=\"/>\n                    <L7p:DataType variableDataType=\"int\"/>\n                    <L7p:VariableToSet stringValue=\"id\"/>\n                </L7p:SetVariable>\n                <L7p:JavaScript>\n                    <L7p:ExecutionTimeout stringValue=\"\"/>\n                    <L7p:Name stringValue=\"\"/>\n                    <L7p:Script stringValueReference=\"inline\"><![CDATA[var inX = context.getVariable('stringAPIDATA');\nvar target = context.getVariable('id');\nvar arrayX = JSON.parse(inX);\nlogger.log(LOG_LEVEL.INFO, \"type \"+  typeof arrayX + \"ID=\" + target);\n\n//let arrayX2 = [ \n//    {\"id\":\"1\",\"name\":\"Private flight\",\"alias\":\"\\\\N\",\"iata\":\"-\",\"icao\":\"N/A\",\"callsign\":\"\",\"country\":\"\",\"active\":\"Y\"}\n//    ,\n//    {\"id\":\"2\",\"name\":\"135 Airways\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"GNL\",\"callsign\":\"GENERAL\",\"country\":\"United States\",\"active\":\"N\"}\n//    ,\n//    {\"id\":\"3\",\"name\":\"1Time Airline\",\"alias\":\"\\\\N\",\"iata\":\"1T\",\"icao\":\"RNX\",\"callsign\":\"NEXTIME\",\"country\":\"South Africa\",\"active\":\"Y\"}\n//    ,\n//    {\"id\":\"4\",\"name\":\"2 Sqn No 1 Elementary Flying Training School\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"WYT\",\"callsign\":\"\",\"country\":\"United Kingdom\",\"active\":\"N\"}\n//    ,\n//    {\"id\":\"5\",\"name\":\"213 Flight Unit\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"TFU\",\"callsign\":\"\",\"country\":\"Russia\",\"active\":\"N\"}\n//    ];\n\n//var count = arrayX.length  \n//logger.log(LOG_LEVEL.INFO, \"local \"+  arrayX2);\n//logger.log(LOG_LEVEL.INFO, \"input \"+  arrayX);\n\n\n//logger.log(LOG_LEVEL.INFO, \"type \"+  typeof arrayX2);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran11 \" + count);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran22 \" + arrayX2.length);\nfor (var i=0; i < arrayX.length; i++){\n//\tlogger.log(LOG_LEVEL.INFO, \"this loop\" + i + arrayX[i].name );\n     if (arrayX[i].id == target) { \t\n    \t   var index =i;\n       break\n    \t}\n    }\n//logger.log(LOG_LEVEL.INFO, \"indexfound \" + index);\n// var newObject = delete myObj[index];\narrayX.splice(index,1);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran2 : \" + myObj.length);\n\n\ncontext.setVariable(\"js.resp\", arrayX );\n//console.log(myObj);]]></L7p:Script>\n                    <L7p:StrictModeEnabled booleanValue=\"false\"/>\n                </L7p:JavaScript>\n                <L7p:HardcodedResponse>\n                    <L7p:Base64ResponseBody stringValue=\"WyR7anMucmVzcH1d\"/>\n                    <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"// Delete a entry by ID\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${request.http.method}\"/>\n                    <L7p:Expression2 stringValue=\"GET\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"GET\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <wsp:OneOrMore wsp:Usage=\"Required\">\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${uriParts[2]}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"int\"/>\n                                </L7p:item>\n                                <L7p:item regex=\"included\">\n                                    <L7p:Pattern stringValue=\"^[1-9]\\d*$\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Evaluator stringValue=\"JsonPath\"/>\n                            <L7p:Expression stringValue=\"$.[?(@.id == &quot;${uriParts[2]}&quot;)]\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"API_DATA\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:HardcodedResponse>\n                            <L7p:Base64ResponseBody stringValue=\"WyR7anNvblBhdGgucmVzdWx0c30gXQ==\"/>\n                            <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Lookup by ID - number\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:ComparisonAssertion>\n                            <L7p:CaseSensitive booleanValue=\"false\"/>\n                            <L7p:Expression1 stringValue=\"${uriParts[2]}\"/>\n                            <L7p:Operator operatorNull=\"null\"/>\n                            <L7p:Predicates predicates=\"included\">\n                                <L7p:item dataType=\"included\">\n                                    <L7p:Type variableDataType=\"string\"/>\n                                </L7p:item>\n                                <L7p:item binary=\"included\">\n                                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                                    <L7p:RightValue stringValue=\"findByName\"/>\n                                </L7p:item>\n                            </L7p:Predicates>\n                        </L7p:ComparisonAssertion>\n                        <L7p:SetVariable>\n                            <L7p:Base64Expression stringValue=\"JHtyZXF1ZXN0Lmh0dHAucGFyYW1ldGVyLm5hbWV9\"/>\n                            <L7p:VariableToSet stringValue=\"name\"/>\n                        </L7p:SetVariable>\n                        <L7p:EncodeDecode>\n                            <L7p:SourceVariableName stringValue=\"name\"/>\n                            <L7p:TargetDataType variableDataType=\"string\"/>\n                            <L7p:TargetVariableName stringValue=\"name\"/>\n                            <L7p:TransformType transformType=\"URL_DECODE\"/>\n                        </L7p:EncodeDecode>\n                        <L7p:EvaluateJsonPathExpressionV2>\n                            <L7p:Evaluator stringValue=\"JsonPath\"/>\n                            <L7p:Expression stringValue=\"$.[?(@.name == &quot;${name}&quot;)]\"/>\n                            <L7p:OtherTargetMessageVariable stringValue=\"API_DATA\"/>\n                            <L7p:Target target=\"OTHER\"/>\n                        </L7p:EvaluateJsonPathExpressionV2>\n                        <L7p:HardcodedResponse>\n                            <L7p:Base64ResponseBody stringValue=\"WyR7anNvblBhdGgucmVzdWx0c30gXQ==\"/>\n                            <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Lookup by name\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <wsp:All wsp:Usage=\"Required\">\n                        <L7p:HardcodedResponse>\n                            <L7p:Base64ResponseBody stringValue=\"JHtBUElfREFUQS5tYWlucGFydH0=\"/>\n                            <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                        </L7p:HardcodedResponse>\n                        <L7p:assertionComment>\n                            <L7p:Properties mapValue=\"included\">\n                                <L7p:entry>\n                                    <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                    <L7p:value stringValue=\"// Return ALL\"/>\n                                </L7p:entry>\n                            </L7p:Properties>\n                        </L7p:assertionComment>\n                    </wsp:All>\n                    <L7p:assertionComment>\n                        <L7p:Properties mapValue=\"included\">\n                            <L7p:entry>\n                                <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                                <L7p:value stringValue=\"// HTTP GET methods\"/>\n                            </L7p:entry>\n                        </L7p:Properties>\n                    </L7p:assertionComment>\n                </wsp:OneOrMore>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"// Get operations\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n            <wsp:All wsp:Usage=\"Required\">\n                <L7p:ComparisonAssertion>\n                    <L7p:Expression1 stringValue=\"${request.http.method}\"/>\n                    <L7p:Expression2 stringValue=\"DELETE\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item binary=\"included\">\n                            <L7p:RightValue stringValue=\"DELETE\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:ComparisonAssertion>\n                    <L7p:CaseSensitive booleanValue=\"false\"/>\n                    <L7p:Expression1 stringValue=\"${uriParts[2]}\"/>\n                    <L7p:Operator operatorNull=\"null\"/>\n                    <L7p:Predicates predicates=\"included\">\n                        <L7p:item dataType=\"included\">\n                            <L7p:Type variableDataType=\"int\"/>\n                        </L7p:item>\n                        <L7p:item regex=\"included\">\n                            <L7p:Pattern stringValue=\"^[1-9]\\d*$\"/>\n                        </L7p:item>\n                    </L7p:Predicates>\n                </L7p:ComparisonAssertion>\n                <L7p:SetVariable>\n                    <L7p:Base64Expression stringValue=\"JHt1cmlQYXJ0c1syXX0=\"/>\n                    <L7p:DataType variableDataType=\"int\"/>\n                    <L7p:VariableToSet stringValue=\"id\"/>\n                </L7p:SetVariable>\n                <L7p:JavaScript>\n                    <L7p:ExecutionTimeout stringValue=\"\"/>\n                    <L7p:Name stringValue=\"\"/>\n                    <L7p:Script stringValueReference=\"inline\"><![CDATA[var inX = context.getVariable('stringAPIDATA');\nvar target = context.getVariable('id');\nvar arrayX = JSON.parse(inX);\nlogger.log(LOG_LEVEL.INFO, \"type \"+  typeof arrayX + \"ID=\" + target);\n\n//let arrayX2 = [ \n//    {\"id\":\"1\",\"name\":\"Private flight\",\"alias\":\"\\\\N\",\"iata\":\"-\",\"icao\":\"N/A\",\"callsign\":\"\",\"country\":\"\",\"active\":\"Y\"}\n//    ,\n//    {\"id\":\"2\",\"name\":\"135 Airways\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"GNL\",\"callsign\":\"GENERAL\",\"country\":\"United States\",\"active\":\"N\"}\n//    ,\n//    {\"id\":\"3\",\"name\":\"1Time Airline\",\"alias\":\"\\\\N\",\"iata\":\"1T\",\"icao\":\"RNX\",\"callsign\":\"NEXTIME\",\"country\":\"South Africa\",\"active\":\"Y\"}\n//    ,\n//    {\"id\":\"4\",\"name\":\"2 Sqn No 1 Elementary Flying Training School\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"WYT\",\"callsign\":\"\",\"country\":\"United Kingdom\",\"active\":\"N\"}\n//    ,\n//    {\"id\":\"5\",\"name\":\"213 Flight Unit\",\"alias\":\"\\\\N\",\"iata\":\"\",\"icao\":\"TFU\",\"callsign\":\"\",\"country\":\"Russia\",\"active\":\"N\"}\n//    ];\n\n//var count = arrayX.length  \n//logger.log(LOG_LEVEL.INFO, \"local \"+  arrayX2);\n//logger.log(LOG_LEVEL.INFO, \"input \"+  arrayX);\n\n\n//logger.log(LOG_LEVEL.INFO, \"type \"+  typeof arrayX2);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran11 \" + count);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran22 \" + arrayX2.length);\nfor (var i=0; i < arrayX.length; i++){\n//\tlogger.log(LOG_LEVEL.INFO, \"this loop\" + i + arrayX[i].name );\n     if (arrayX[i].id == target) { \t\n    \t   var index =i;\n       break\n    \t}\n    }\n//logger.log(LOG_LEVEL.INFO, \"indexfound \" + index);\n// var newObject = delete myObj[index];\narrayX.splice(index,1);\n//logger.log(LOG_LEVEL.INFO, \"this is Aran2 : \" + myObj.length);\n\n\ncontext.setVariable(\"js.resp\", arrayX );\n//console.log(myObj);]]></L7p:Script>\n                    <L7p:StrictModeEnabled booleanValue=\"false\"/>\n                </L7p:JavaScript>\n                <L7p:HardcodedResponse>\n                    <L7p:Base64ResponseBody stringValue=\"WyR7anMucmVzcH1d\"/>\n                    <L7p:ResponseContentType stringValue=\"application/json; charset=UTF-8\"/>\n                </L7p:HardcodedResponse>\n                <L7p:assertionComment>\n                    <L7p:Properties mapValue=\"included\">\n                        <L7p:entry>\n                            <L7p:key stringValue=\"RIGHT.COMMENT\"/>\n                            <L7p:value stringValue=\"// Add Entry\"/>\n                        </L7p:entry>\n                    </L7p:Properties>\n                </L7p:assertionComment>\n            </wsp:All>\n        </wsp:OneOrMore>\n    </wsp:All>\n</wsp:Policy>\n"
  }
}